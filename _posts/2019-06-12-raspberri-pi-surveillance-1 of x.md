# 라즈베리파이(2)와 python을 활용한 감시 카메라 - 1 of X

## 라즈베리파이를 사용해야 했던 이유

약간의 검색을 통해서 순식간에 인터넷에서 아주 저렴한 감시 카메라들을 구입할 수가 있다. 샤오미에서 파는 것들 같은 것 말이다.
그런데, 감시 카메라를 설치할만큼 보안의 신경을 쓰면서, 샤오미를 믿을 수가 있는가 하는 문제가 있다. 
그러한 의심들을 여타의 비슷하고, 저렴한 중국산 제품들에게서 거두기가 쉽지 않다.

또 스마트(?) 도어벨 같은 것들이 있다. 카메라가 있어서, 벨을 누른다거나 혹은 동작이 감지되면, 등록된 스마트폰 등으로 이를 알려주는 기능이 있기는 하다.그런데, 그것들이 '보안'장치로써의 그다지 믿음이 가지 않는다. 먼저, 모든 본체가 외부(문박)에 그냥 부착되어 있다. 
만약 집에 침입을 하려는 수준의 나쁜 마음을 먹은하면, 집 앞에 있는 스마트 도어벨은 망가뜨리는 것은 어렵지 않은 단계다. 사실, 대부분의 그런 장치들은 그냥 나사 풀고 때어내면 된다. 왜냐고, 배터리 교체를 위해서 탈부착이 쉽게 되어 있다. 그리고, 이런 것들은 대부분 Wi-Fi로 동작을 하는데, Wi-Fi 방해장치는 쉽지 않게 만들거나 구할 수가 있다. 

따라서, 나의 요구 조건은 다음과 같았다.
* 본체는 댁내/문안에 안전하게 존재해야 한다. 
침입자가 외부의 카메라 모듈을 회손할 경우에도, 관련 영상은 본체에 저장되고, 넷상의 어딘가로 백업이 되어야 한다.
* 유선 인터넷과 유선 전원이 연결되어야 한다.
* 인터넷 서비스를 통해서, 감지된 영상을 전송해야 한다.

## 준비물
* 라즈베리파이 (본인은 라즈베리파이2를 사용함. 라즈베리파이 제로에서 적절하게 동작하는지는 확인해보지 못함.)
* 카메라 모듈
* 50cm 플랫 케이블
* 기타 각종 필요 장치/부품(e.g. 전원, 랜선, sd card 등등)

## 결과
* 동작을 감지하면, 
  - 로컬에 사진과 동영상을 저장함. 
* 감지 사진과 영상이 저장되면,
  - 텔레그램 계정으로 사진(들)을 전송함.
    + 그냥 편하게 카카오톡으로 하려고 했으나, 카톡 api가 사진전송하기가 쉽지 않았음. 역시 우리 나라 서비스들은 좀...
    + 텔레그램에 전용 봇을 만들어서, 이를 통해서 사진 혹은 메세지를 보냄.
  - 구글 드라이브로 해당 사진과 영상을 업로드함.
    + 파일 전송이 가능한 api 를 제공하는 각종 서비스다 연결이 가능할테지만, 그냥 편하게 구글 드라이브에서 만족하고 맘.
    + 그런데, 이 구글 드라이브 api 때문에, 자주 broken pipe 에러가 뜨면서 프로세스가 죽는데, 대충 쉘 스크립트에서 다시 재실행하도로 처리했음. 보다 이쁘게 만들 수는 있기는 한데, 이건 제품은 아니니까, 사용은 할 수 있으니까..이정도에서 일단 마무리함..
    
    
### to be continued....


